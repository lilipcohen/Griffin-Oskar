<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>GRIFFIN OSKAR</title>
    <!--Materialize Framework Links-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">
    <!--Glitch Link-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!--Google Fonts Link-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&family=Yanone+Kaffeesatz&display=swap"
        rel="stylesheet">
    <!--Stylesheet Link-->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div id="app">
                <div id="wrapper">
                    <h1 class="glitch" data-text="GRIFFIN OSKAR">GRIFFIN OSKAR</h1>
                    <span class="sub">EFFECT</span>
                </div>
            </div>
        </div>
        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><span class="material-icons">menu</span></a>
        <!--Youtube Video-->
        <div class="row">
            <iframe id="video" src="https://www.youtube.com/embed/4IQoNu5Z3pA" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        
        
            <!--Social Media side navigation-->
        
            
            <div class="social-links">
                <a href="https://www.instagram.com/griffinoskar/?hl=en" id="instagram">instagram</a>
                <a href="https://www.facebook.com/GriffinOskar/" id="facebook">facebook</a>
                <a href="https://twitter.com/griffinoskar?lang=en" id="twitter">twitter</a>
                <a href="https://www.youtube.com/c/GriffinOskar" id="youtube">youtube</a>
                <a href="https://open.spotify.com/artist/5ziQ5Xt7CSrcnatEC4Ufy6" id="spotify">spotify</a>
                <a href="https://music.apple.com/us/artist/griffin-oskar/1199232738" id="apple-music">apple music</a>
            
            </div>
            <div class="modal-bg-sidenav">
                <div class="modal">
                    <ul class="sidenav" id="mobile-demo">
                        <span class="modal-close">&times</span>
                        <li><a href="https://www.instagram.com/griffinoskar/?hl=en">instagram</a></li>
                        <li><a href="https://www.facebook.com/GriffinOskar/">facebook</a></li>
                        <li><a href="https://twitter.com/griffinoskar?lang=en">twitter</a></li>
                        <li><a href="https://www.youtube.com/c/GriffinOskar">youtube</a></li>
                        <li><a href="https://open.spotify.com/artist/5ziQ5Xt7CSrcnatEC4Ufy6">spotify</a></li>
                        <li><a href="https://music.apple.com/us/artist/griffin-oskar/1199232738">apple music</a></li>
                    </ul>
                </div>
            </div>
        
        </div>

        <!--Modals-->
        <div class="modal-bg-tours">
            <div class="modal modal-bands">
                
            </div>
        </div>
        <div class="modal-bg-photos">
            <div class="modal modal-carousel">
                
            </div>
        </div>
        <div class="modal-bg-contact">
            <div class="modal">
                <form action="/subscribe" method="POST">
                    <input type="email" name="email" id="email" placeholder="your email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
                    <p id="error" class="error">Please enter an email</p>
                    <input type="submit" value="Sign up!" class="button" id="cta">
                </form>
                <span class="modal-close">&times</span>
            </div>
        </div>
    </div> 
    <script>

        let cta = document.getElementById('cta');
        let email = document.getElementById('email').value;
        let error = document.getElementById('error');

        cta.addEventListener('click', (event) => {
            event.preventDefault();

            if (this.email.value == null || this.email.value == "") {
                error.classList.add('errorAnim');
            } else {
                console.log('activated');
                let fetchData = {
                    method: 'POST',
                    // stringify converts an object to a JSON value
                    body: JSON.stringify({email: this.email.value, js: true}), 
                    // because we're sending JSON data now, we include the following headers as application/json
                    headers: {"Content-Type": "application/json"}
                }
                
                fetch('/subscribe', fetchData)
                    .then(res => {
                        if(res.ok) {
                            console.log('success!');
                        } else {
                            error.classList.add('you did not meet the requirements');
                        }
                    })
            }
        });

    </script>
<script
src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"></script>
        <footer class="row" id="footer">
            <a href="#tours" id="tours">Tours</a>
            <a href="#photos" id="photos">Photos</a>
            <a href="#contact" id="contact">Contact</a>
            <p id="footer-rights">Â© 2020 Griffin Oskar. All Rights Reserved. Privacy Policy.</p>
        </footer>
    </div>
    <!--Materialize Javascript Links-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
    <!--Jquery Link-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="./script.js"></script>
    <script src="./app.js"></script>
</body>

</html>